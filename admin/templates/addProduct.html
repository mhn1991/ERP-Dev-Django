{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<title>Add Product Page</title>
	<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" name="viewport" />
	<meta content="" name="description" />
	<meta content="" name="author" />
	
	<!-- ================== BEGIN BASE CSS STYLE ================== -->
	<script
			  src="https://code.jquery.com/jquery-3.4.1.min.js"
			  integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
			  crossorigin="anonymous"></script>
	<link href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700,900" rel="stylesheet" />
	<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />
	<link href="{% static 'assets1/css/material/app.min.css' %}" rel="stylesheet" />
	<link href="{% static 'assets1/plugins/bootstrap-select/dist/css/bootstrap-select.min.css' %}" rel="stylesheet" />
	<link href="{% static 'assets1/plugins/bootstrap-daterangepicker/daterangepicker.css' %}" rel="stylesheet">
	<!-- ================== END BASE CSS STYLE ================== -->
</head>
<body>
	<!-- begin #page-loader -->
	<div id="page-loader" class="fade show">
		<div class="material-loader">
			<svg class="circular" viewBox="25 25 50 50">
				<circle class="path" cx="50" cy="50" r="20" fill="none" stroke-width="2" stroke-miterlimit="10"></circle>
			</svg>
			<div class="message">Loading...</div>
		</div>
	</div>
	<!-- end #page-loader -->	
	<!-- begin #page-container -->
	<div id="page-container" class="page-container fade page-sidebar-fixed page-header-fixed page-with-wide-sidebar">
		<!-- begin #header -->
        {% include "admin/header.html" %}
		<!-- end #header -->
		
		{% include "admin/sideBar.html" %}
		<!-- begin #content -->
		<div id="content" class="content">
		  <div class="panel panel-inverse">
				<div class="panel-heading">
					<h4 class="panel-title"></h4>
					<div class="panel-heading-btn">
						<a href="javascript:;" class="btn btn-xs btn-icon btn-circle btn-default" data-click="panel-expand"><i class="fa fa-expand"></i></a>
						<a href="javascript:;" class="btn btn-xs btn-icon btn-circle btn-success" data-click="panel-reload"><i class="fa fa-redo"></i></a>
						<a href="javascript:;" class="btn btn-xs btn-icon btn-circle btn-warning" data-click="panel-collapse"><i class="fa fa-minus"></i></a>
						<a href="javascript:;" class="btn btn-xs btn-icon btn-circle btn-danger" data-click="panel-remove"><i class="fa fa-times"></i></a>
					</div>
				</div>
				<div class="panel-body">
				  <script>
				    
				    function adduploadbtn(){
					var input = document.createElement("input");
					input.type= "file";
					input.setAttribute("class", "form-control m-b-5");
					input.setAttribute("onchange", "adduploadbtn()");
					input.setAttribute("name", "file");
					var div = document.getElementById("photo");
					div.appendChild(input);
				    }

				    function calendar(){
					var checkbox = document.getElementById("switcher_checkbox_1");
					var div = document.getElementById("calendar");
					if(!checkbox.checked){
					    div.setAttribute('class','input-group input-daterange hide');
					}
					else{
					    div.setAttribute('class','input-group input-daterange');
					}
				    }

				    function getOption(sel){
					var val = sel.value;
					console.log(val);
					var xmlhttp = new XMLHttpRequest();
					var url = window.location.protocol + "//" + window.location.host + "/" + "getTemplate/";
					var parameters="name="+encodeURIComponent(val)
					xmlhttp.onreadystatechange = function() {
					    if (this.readyState == 4 && this.status == 200) {
						var json = JSON.parse(this.responseText);
						showTemplate(json);
					    }
					};
					
					xmlhttp.open("POST", url,false);
					xmlhttp.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
					xmlhttp.setRequestHeader("X-CSRFToken", "{{csrf_token}}");
					xmlhttp.send(parameters);
				    }
				    
				    function showTemplate(data){
					var div   = document.getElementById('template_place');
					while (div.firstChild) {
					    div.removeChild(div.lastChild);
					}
					var table = document.createElement('table');
					table.setAttribute('class','table table-bordered');
					var thead = document.createElement('thead');
					var tr    = document.createElement('tr');
					var th    = document.createElement('th');
					th.innerHTML = '#';
					var th1    = document.createElement('th');
					th1.innerHTML = 'field';
					var th2    = document.createElement('th');
					th2.innerHTML = 'value';
					tr.appendChild(th);
					tr.appendChild(th1);
					tr.appendChild(th2);
					thead.appendChild(tr);
					table.appendChild(thead);
					var tbody = document.createElement('tbody');
					table.appendChild(tbody);
					//var tr2    = document.createElement('tr');
					var i = 0;
					for(var k in data){
					    var tr2    = document.createElement('tr');
					    i +=1;
					    var td = document.createElement("td");
					    td.innerHTML = i;
					    var td1 = document.createElement("td");
					    td1.innerHTML = k;
					    var td2 = document.createElement("td");
					    td2.innerHTML = data[k];
					    tr2.appendChild(td);
					    tr2.appendChild(td1);
					    tr2.appendChild(td2);
					    tbody.appendChild(tr2); 
					}
					table.appendChild(tbody);
					div.appendChild(table);
				    }

				    $(document).ready(function() {
					var input = document.getElementById("discount");
					input.value = 0;
				    });
				    
				  </script>
				  <form action="/addP/" name="wysihtml5" method="POST" enctype="multipart/form-data">
				    {% csrf_token %}
				    <div class="col-md-12">
				      <input type="text" class="form-control m-b-5" placeholder="Enter Title" name="title"/>
                                      <input type="text" class="form-control m-b-5" placeholder="Code" name="code" />
				      <input type="text" class="form-control m-b-5" placeholder="Price" name="price" />
				      <input type="number" class="form-control m-b-5" placeholder="Number" name="number" />
				      <!--<input type="number" class="form-control m-b-5" placeholder="Discount" name="discount" id="discount"/>-->
				      <div class="switcher">
					<input type="checkbox" name="switcher_checkbox_1" id="switcher_checkbox_1" onchange="calendar()">
					<label for="switcher_checkbox_1">it has discount?</label>
				      </div>
				      <div id="calendar" class="input-group input-daterange hide" >
					<div class="grid">
					  <div class="row">
					    <input type="number" class="form-control m-b-12" placeholder="Discount" name="discount" id="discount"/>
					    <input data-provide="datepicker" data-date-format='yyyy-mm-dd' name="startDate" placeholder="start date">
					    <span class="input-group-addon">to</span>
					    <input data-provide="datepicker" data-date-format='yyyy-mm-dd' name="endDate" placeholder="end date">
					  </div>
					</div>
				      </div>
				      <div id="photo">
					<input type="file" class="form-control m-b-5" name="file" onchange="adduploadbtn()"/>
				      </div>
				      <br/>
				      <select class="form-control selectpicker" data-size="10" data-live-search="true" data-style="btn-info" name='template' onchange="getOption(this)">
					<option value="" selected="">Select a Template</option>
					{% for template in templates %}
					<option>{{template.name}}</option>
					{% endfor %}
				      </select>
				      <div id="template_place">
				      </div>
				      <select class="form-control selectpicker danger" data-size="10" data-live-search="true" data-style="btn-info" name='category'>
					{% for cat in cats %}
					<option>{{cat.category}}</option>
					{% endfor %}
				      </select>
				      <br>
				      <input type="number" class="form-control m-b-12" placeholder="biggest unit" name="priceForPallet"/>
				      <input type="number" class="form-control m-b-12" placeholder="smaller unit" name="priceForBox"/>
				      <input type="number" class="form-control m-b-12" placeholder="smallest unit" name="priceForNum"/>
                                      <textarea class="textarea form-control" id="wysihtml5"  rows="12" name='description' placeholder= "{{file}}"></textarea>
				      <button type="submit" class="btn btn-sm btn-primary m-r-12">Save</button>
				      </div>
				</form>
				</div>
			</div>
		  
		</div>
		<!-- end #content -->
		
		<!-- begin theme-panel -->
		
		<!-- end theme-panel -->
		
		<!-- begin scroll to top btn -->
		<a href="javascript:;" class="btn btn-icon btn-circle btn-success btn-scroll-to-top fade" data-click="scroll-top"><i class="fa fa-angle-up"></i></a>
		<!-- end scroll to top btn -->
	</div>
	<!-- end page container -->
	
	<!-- ================== BEGIN BASE JS ================== -->
	<script src="{% static 'assets1/js/app.min.js' %}"></script>
	<script src="{% static 'assets1/js/theme/material.min.js' %}"></script>
	<script src="{% static 'assets1/plugins/bootstrap3-wysihtml5-bower/dist/bootstrap3-wysihtml5.all.min.js' %}"></script>
	<script src="{% static 'assets1/js/demo/form-wysiwyg.demo.js' %}"></script>
	<script src="{% static 'assets1/plugins/bootstrap-select/dist/js/bootstrap-select.min.js' %}"></script>
	<script src="{% static 'assets1/plugins/moment/min/moment.min.js' %}"></script>
	<script src="{% static 'assets1/plugins/bootstrap-datepicker/dist/js/bootstrap-datepicker.js' %}"></script>
	<script src="{% static 'assets1/plugins/bootstrap-daterangepicker/daterangepicker.js' %}"></script>
	<!-- ================== END BASE JS ================== -->
</body>
</html>
